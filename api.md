# Interface reference (API)
[d]: #interface-reference-api
**[PROJECT PAGE](../../) | [README](README.md) | [EXAMPLES][exmp]**

### Exports
[class Stigma(...)][st]
- [.validate(...)][stval]
- [.validateOf(...)][stval]
- Errors that are _returned_ by validate():
- [static OBJECT_IS_MISSING][stval]
- [static INVALID_OBJ_REDUNDANT_PROPS][stval]
- [static VALIDATION_PROP_REQUIRED][stval]

[class Rules](#class-rule) - Rule wrapper
<br>[min(n)][helpers] - rule helper that can be used inside schema
<br>[max(n)][helpers]

### class Stigma
[st]: #class-stigma
```typescript
new Stigma(schema: schema, redundantProps: boolean = true)
``` 
Instantiates validation object.
Can be also accessed by ``Rules`` alias.
```typescript
schema: { field : Rule | Array<Rule>}
Rule: 
    Number | String | Boolean | Array | Date // returns TypeError
  | RegExp 
  | 'optional' // denotes optional field of the schema
  | 'required'
  | function (fieldValue): Error | String
```

The ``schema`` above is an object that contains built-in
<br>constructors like ``String`` that are used as validators
<br>to check the values of respective field in the provided to the validate() target object (see below)
<br>For the rest of this document these constructors are denoted as ``rule``.

You can create your own rule by using simple function though
<br>such validators are restricted to return ``string`` and ``error`` types only
<br>both of which indicate an error.
<br>The rules by itself can be combined into arrays. See examples [below][exmp].

The rules ``'optional'`` and ``'required'`` are special words that used
<br>to tell stigma to treat some of the object's
<br>properties of the target (which is provided to validate()) in the following way:
<br>if schema has a key set to the ``'optional'`` value then validator
<br>treats this key in targets's object as optional one and returns no error if it is missing
<br>and otherwise if ``'required'`` is specified:

```typescript
  new Stigma({foo: 'optional', bar: 'required'})
    .validate({
      foo: null,// no errors
      bar: null // returns Stigma.VALIDATION_PROP_REQUIRED
    },true)
```

#### .validate(...) and .validateOf(...)
[stval]: #validate-and-validateof

```typescript 
validate(target: object, synchronous: boolean = false): Promise
validate(target: object, synchronous: boolean = true) String | Error | Void
```
Validation function of the stigma object with respective alias.
<br>It takes simple js object as first argument to be validated.
<br>The second is used to configure returned object: promise or simple error/string.

Whenever the error occurs the method returns the following errors:
<br>``Stigma.OBJECT_IS_MISSING`` - when first argument is missing
<br>``Stigma.INVALID_OBJ_REDUNDANT_PROPS`` - when there are redundunt (regarding those in schema) fileds in the provided object
<br>``Stigma.VALIDATION_PROP_REQUIRED`` - when value is ``'required'`` by the schema but missing in provided object

### class Rule

```typescript
new Rule(rule,name)
```
The rule wrapper. 

### Rule helpers
[helpers]: #rule-helpers
Here also some useful exports that can be used during schema building:
<br>**``min(n: string | number): (v) => ... ``** - return function can be used to restrict string length or number count
<br>**``max(n: string | number): (v) => ... ``** - see usage below

### EXAMPLES
[exmp]: #examples

#### Example of creating function rule
Let's assume we want to validate ``_id`` field. We can do this by creating a validation function
<br>that checks ID class and returns error (just string) if something is going wrong:
```typescript
import {Stigma} from 'stigma';
error = new Stigma({_id: value => (value instanceof IDClass) || 'IDClass instance expected!' })
  .validate(someObject, true)
```
You won't get the true in the promise if value is instance of the IDClass.

#### Example of combined rules
Schema below contains two rules: ``String`` and ``max``
<br>The key below is expected to be of string type and no more than six chars long:
```typescript
import {Stigma, max} from 'stigma';
// return error if "key" is not a string or longer than 6 chars
error = new Stigma({key: [ String, max(6) ] }).validate({key: 'keyvalue'}, true)
```

<hr>

Go back to the **[top][d]**
